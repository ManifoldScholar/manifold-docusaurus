"use strict";(self.webpackChunkmanifold_docusaurus=self.webpackChunkmanifold_docusaurus||[]).push([[1227],{47595:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var o=n(74848),a=n(28453);const i={slug:"log42j",title:"Log4j2 Vulnerability"},s=void 0,l={permalink:"/manifold-docusaurus/blog/log42j",source:"@site/blog/2021-12-13-log42j.md",title:"Log4j2 Vulnerability",description:"Good afternoon, everyone!",date:"2021-12-13T00:00:00.000Z",tags:[],readingTime:1.81,hasTruncateMarker:!1,authors:[],frontMatter:{slug:"log42j",title:"Log4j2 Vulnerability"},unlisted:!1,prevItem:{title:"Manifold Welcomes Six New Publishers",permalink:"/manifold-docusaurus/blog/welcome-new-publishers"},nextItem:{title:"OA Week 2021 Project Spotlight 4",permalink:"/manifold-docusaurus/blog/oa-week-2021-project-spotlight-4"}},r={authorsImageUrls:[]},c=[];function d(e){const t={code:"code",li:"li",ol:"ol",p:"p",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Good afternoon, everyone!"}),"\n",(0,o.jsx)(t.p,{children:"A few people have asked me about Manifold\u2019s susceptibility to critical log4j2 vulnerability (CVE-2021-44228) that was announced last week."}),"\n",(0,o.jsx)(t.p,{children:"So far, we haven\u2019t seen evidence that Manifold is vulnerable to this exploit. Manifold relies on Elasticsearch for its search functionality, and Elasticsearch in turn uses the vulnerable log4j logging library. The version that ships with Manifold is vulnerable, but that doesn\u2019t necessarily mean that the vulnerability can be easily exploited. Manifold does not expose its Elasticsearch service to the public, and all connections to it are mediated through the API. We\u2019ve investigated, and it\u2019s our view that no user input from a public Manifold instance can make its way into log4j logs, which means that Manifold does not appear to be vulnerable. Furthermore, the Elasticsearch team claims that version 7, which is what is in the Manifold package, is not susceptible to remote code execution."}),"\n",(0,o.jsx)(t.p,{children:"That said, it pays to be especially cautious in these matters, and we\u2019re working on 6.0.1 packages that will include updates to Elasticsearch and log4j. As of earlier this morning, we were still waiting on Elasticsearch 7.16.1 to be released, and it will take us a few days to build and test new packages. I expect we\u2019ll release 6.0.1 on Tuesday or Wednesday of this week, which will be an easy upgrade for everyone already on v6. It should also be easy for people on v5, as we haven\u2019t had any significant reports of upgrade problems."}),"\n",(0,o.jsx)(t.p,{children:"If you installed Manifold from one of our packages (for Ubuntu or CentOS), you can easily mitigate the problem by adding one line to a file and restarting Elasticsearch. To do this, follow these steps:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Shell into your server and edit ",(0,o.jsx)(t.code,{children:"/var/opt/manifold/elasticsearch/jvm.options"})," as root."]}),"\n",(0,o.jsxs)(t.li,{children:["Add this text on a new line at the end of the file and save it: ",(0,o.jsx)(t.code,{children:"-Dlog4j2.formatMsgNoLookups=true"})]}),"\n",(0,o.jsxs)(t.li,{children:["Restart Elasticsearch to pick up the new configuration: ",(0,o.jsx)(t.code,{children:"sudo manifold-ctl restart elasticsearch"})]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"If you are hosting Manifold through Manifold Digital Services, rest assured that we will be releasing a similar mitigation in the next couple hours to all instances."}),"\n",(0,o.jsx)(t.p,{children:"We will also publish updated docker images when 6.0.1 is released later this week."}),"\n",(0,o.jsx)(t.p,{children:"\u2014Zach"})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var o=n(96540);const a={},i=o.createContext(a);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);