"use strict";(self.webpackChunkmanifold_docusaurus=self.webpackChunkmanifold_docusaurus||[]).push([[693],{77475:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>v,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=t(74848),a=t(28453),s=t(45321);const r={id:"environment_variables",title:"Environment Variables",sidebar_label:"Environment Variables"},o=void 0,l={id:"administering/reference/environment_variables",title:"Environment Variables",description:"Manifold uses Environment variables to orchestrate and configure its various services.",source:"@site/docs/administering/reference/environment_variables.mdx",sourceDirName:"administering/reference",slug:"/administering/reference/environment_variables",permalink:"/manifold-docusaurus/docs/administering/reference/environment_variables",draft:!1,unlisted:!1,editUrl:"https://github.com/ManifoldScholar/manifold-docusaurus/edit/master/docs/administering/reference/environment_variables.mdx",tags:[],version:"current",frontMatter:{id:"environment_variables",title:"Environment Variables",sidebar_label:"Environment Variables"},sidebar:"docs",previous:{title:"Export Targets",permalink:"/manifold-docusaurus/docs/administering/configuring/export_targets"},next:{title:"API Rake Tasks",permalink:"/manifold-docusaurus/docs/administering/reference/api_rake_tasks"}},c={},d=[{value:"Package Install",id:"package-install",level:3},{value:"Other installation types",id:"other-installation-types",level:3},{value:"Available Variables",id:"available-variables",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Manifold uses Environment variables to orchestrate and configure its various services."}),"\n",(0,i.jsx)(n.h3,{id:"package-install",children:"Package Install"}),"\n",(0,i.jsxs)(n.p,{children:["Environment variables for the Manifold API and Client are stored in ",(0,i.jsx)(n.code,{children:"/var/opt/manifold/etc/"}),". Do not edit these files directly, as they are generated anew each time you run ",(0,i.jsx)(n.code,{children:"manifold-ctl reconfigure"}),". Instead, edit the master configuration file at ",(0,i.jsx)(n.code,{children:"etc/manifold/manifold.rb"}),". To inject environment variables for the API, expose your environment variables as a hash at ",(0,i.jsx)(n.code,{children:"manifold_api['env']"}),". Remember, this file is a Ruby file and should be valid Ruby syntax."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",children:'#### Add custom environment to Manifold API\nmanifold_api[\'env\'] = {\n  "FOO" => "bar"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["As always, once you've updated this file, run ",(0,i.jsx)(n.code,{children:"sudo manifold-ctl reconfigure"})," to apply your changes. Look at ",(0,i.jsx)(n.code,{children:"/var/opt/manifold/etc/api-env.sh"})," to confirm that your additons to the environment persisted."]}),"\n",(0,i.jsx)(n.h3,{id:"other-installation-types",children:"Other installation types"}),"\n",(0,i.jsxs)(n.p,{children:["In a Docker environment, you can pass environment variables to services using the Docker Compose file. When developing locally or deploying from source, it's also possible to set variables in the application's root ",(0,i.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,i.jsx)(n.h3,{id:"available-variables",children:"Available Variables"}),"\n",(0,i.jsx)(n.p,{children:"The following environment variables can be used to adjust Manifold's behavior. Variables can be exposed to the Client and/or the API services, [C] and [A] accordingly."}),"\n",(0,i.jsx)(s.A,{title:"Environment Variables",items:[{key:"DOMAIN",value:"[C, A] The FQDN domain name for the instance "},{key:"SSL_ENABLED",value:"[C, A] True if SSL is enabled"},{key:"NODE_TLS_REJECT_UNAUTHORIZED",value:" [C] True if client should accept self-signed API certificates"},{key:"API_SOCKET",value:"[A] Location for the API service socket file"},{key:"API_CABLE_SOCKET",value:"[A] Location for the cable service socket file"},{key:"CLIENT_SERVER_SOCKET",value:"[C]Location for the client service socket file"},{key:"CLIENT_SERVER_PORT",value:"[C] Expose the client service on a port"},{key:"API_PORT",value:"[A] Expose the API service on a port"},{key:"API_CABLE_PORT",value:"[A] Expose the cable service on a port"},{key:"CLIENT_URL",value:"[C, A] The base URL for the client"},{key:"CLIENT_BROWSER_API_URL",value:"[C] The base URL that the client should use to access the API"},{key:"CLIENT_BROWSER_API_CABLE_URL",value:"[C] The base URL that the client should use to access cable"},{key:"CLIENT_SERVER_PROXIES",value:"[C] Allows the client to proxy requests to the API"},{key:"ELASTICSEARCH_URL",value:"[A] The URL of Elasticsearch"},{key:"NODE_ENV",value:"[C] The client environment (production, development)"},{key:"RAILS_ENV",value:"[A] The API environment (production, development)"},{key:"RAILS_DB_PORT",value:"[A] Postgres port"},{key:"RAILS_DB_HOST",value:"[A] Postgres host"},{key:"RAILS_DB_NAME",value:"[A] Postgres database name"},{key:"RAILS_DB_USER",value:"[A] Postgres user"},{key:"RAILS_DB_PASS",value:"[A] Postgres password"},{key:"RAILS_DB_URL",value:"[A] Redis URL"},{key:"RAILS_SECRET_KEY",value:"[A] A long, secret, string"},{key:"MANAGE_SETTINGS_FROM_ENV",value:"[A] Allow settings to be managed from the environment"}]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["It is also possible to manage Manifold settings through the environment. See our documentation on ",(0,i.jsx)(n.a,{href:"/docs/administering/configuring/managing_settings#from-the-environment",children:"managing settings"})," for more information."]})})]})}function v(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},45321:(e,n,t)=>{t.d(n,{A:()=>r});t(96540);var i=t(34164);const a={specContainer:"specContainer_R31d",specTitleWrapper:"specTitleWrapper_BDYd",specTitle:"specTitle_XtzR",specSubtitle:"specSubtitle_aF9x",specContent:"specContent_OrJb",specTable:"specTable_ebTy"};var s=t(74848);const r=e=>{let{title:n,subtitle:t,items:r,children:o}=e;return(0,s.jsxs)("div",{className:(0,i.A)(a.specContainer),children:[n&&(0,s.jsxs)("div",{className:(0,i.A)(a.specTitleWrapper),children:[(0,s.jsx)("span",{className:(0,i.A)(a.specTitle),children:n}),t&&(0,s.jsx)("span",{className:(0,i.A)(a.specSubtitle),children:t})]}),r&&(0,s.jsx)("div",{className:(0,i.A)(a.specTable),children:(0,s.jsx)("table",{width:"100%",children:(0,s.jsx)("tbody",{children:r.map(((e,n)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:(0,i.A)(a.specKey),children:e.key}),(0,s.jsx)("td",{className:(0,i.A)(a.specValue),children:e.value})]},e.key)))})})}),o?(0,s.jsx)("div",{className:(0,i.A)(a.specContent),children:o}):null]})}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(96540);const a={},s=i.createContext(a);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);