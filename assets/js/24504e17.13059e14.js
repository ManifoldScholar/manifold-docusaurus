"use strict";(self.webpackChunkmanifold_docusaurus=self.webpackChunkmanifold_docusaurus||[]).push([[5719],{26662:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>h});var a=n(74848),o=n(28453);const i={slug:"atechnicalintroductiontomanifold",title:"A Technical Introduction to Manifold"},r=void 0,s={permalink:"/manifold-docusaurus/blog/atechnicalintroductiontomanifold",source:"@site/blog/2015-12-03-a-technical-introduction-to-manifold.md",title:"A Technical Introduction to Manifold",description:"Hello Manifoldians!",date:"2015-12-03T00:00:00.000Z",tags:[],readingTime:8.71,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"atechnicalintroductiontomanifold",title:"A Technical Introduction to Manifold"},unlisted:!1,prevItem:{title:"Thoughts from Editors and Authors on What Makes a Good Manifold Project",permalink:"/manifold-docusaurus/blog/thoughtsfromeditorsandauthorsonwhatmakesagoodmanifoldproject"},nextItem:{title:"Opening Access: The Reinvention of the Academic Book",permalink:"/manifold-docusaurus/blog/openingaccessthereinventionoftheacademicbook"}},l={authorsImageUrls:[]},h=[{value:"Where to find the source code",id:"where-to-find-the-source-code",level:2},{value:"Server-side architecture",id:"server-side-architecture",level:2},{value:"Client-side architecture",id:"client-side-architecture",level:2},{value:"Testing",id:"testing",level:2},{value:"Server infrastructure and continuous integration",id:"server-infrastructure-and-continuous-integration",level:2},{value:"In Closing",id:"in-closing",level:2}];function c(e){const t={a:"a",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Hello Manifoldians!"}),"\n",(0,a.jsxs)(t.p,{children:["I'm Zach Davis, principle at ",(0,a.jsx)(t.a,{href:"http://castironcoding.com",children:"Cast Iron Coding"}),", a web development studio in Portland, Oregon. My team and I are responsible for UX design, visual design, and development of Manifold over the course of the grant, and it is my hope that I'll be able to post regular updates here detailing development and design decisions, challenges, and milestones over the course of the project."]}),"\n",(0,a.jsx)(t.p,{children:"For now, however, I'd like to walk through the technology stack we've settled on, and the reasoning behind some of these choices. If anyone has any questions, please don't hesitate to post a comment!"}),"\n",(0,a.jsx)(t.h2,{id:"where-to-find-the-source-code",children:"Where to find the source code"}),"\n",(0,a.jsxs)(t.p,{children:["As you know, one of the requirements of the grant funding this development is that Manifold be released as open source, and our current plan is to release Manifold under the GPLv3. For the time being, Manifold source code is stored in the ",(0,a.jsx)(t.a,{href:"https://github.com/ManifoldScholar/manifold",children:"ManifoldScholar/manifold Github repository"}),". If you look at the ",(0,a.jsx)(t.a,{href:"https://github.com/ManifoldScholar",children:"ManifoldScholar GitHub organization"}),", you'll see additional repositories for ",(0,a.jsx)(t.a,{href:"https://github.com/ManifoldScholar/manifold-api",children:"Manifold-API"})," and ",(0,a.jsx)(t.a,{href:"https://github.com/ManifoldScholar/manifold-client",children:"Manifold-Client"}),". Eventually, we hope to be able to provide the Manifold API as a stand-alone piece of software that can be used to parse, store, and expose ePub and Markdown documents over a RESTful API. In preparation for this, we're using a ",(0,a.jsx)(t.a,{href:"https://medium.com/@porteneuve/mastering-git-subtrees-943d29a798ec#.siwyoulty",children:"git subtree-split strategy"})," to break the Manifold project into separate API and Client packages. These split repositories are updated significantly less frequently than the main Manifold repository. If your goal is to follow our development, for now your best bet will be to just watch the primary repository."]}),"\n",(0,a.jsx)(t.p,{children:"We've already made significant progress on Manifold, although we're still far from an alpha release. We'd love it if you'd show your support for our project by starring our GitHub repo and keeping an eye on development. As we get closer to a stable alpha release in 2016, we'll invite community members to download and install their own instance of Manifold."}),"\n",(0,a.jsx)(t.h2,{id:"server-side-architecture",children:"Server-side architecture"}),"\n",(0,a.jsx)(t.p,{children:"Manifold is split into the client application, and the server-side application. For now, these two applications share a repository to simplify development, but they are very distinct and meant to run independently of each other."}),"\n",(0,a.jsxs)(t.p,{children:["The server-side application is built in ",(0,a.jsx)(t.a,{href:"https://www.ruby-lang.org/en/",children:"Ruby"})," and ",(0,a.jsx)(t.a,{href:"http://rubyonrails.org/",children:"Rails"}),". Specifically, we're using what is currently edge Rails, and what will soon be ",(0,a.jsx)(t.a,{href:"https://blog.engineyard.com/2015/a-look-at-rails-5",children:"Rails 5"}),". The development team thought long and hard about what server-side language to use, which was mainly a debate about the relative merits of using Ruby or Javascript on the server. While we have many years of experience working with PHP, and understand that it is still a popular, easy choice among academic developers, we felt strongly that the advantages of Ruby\u2014strong OOP support, support for more functional styles, cleaner and more consistent syntax, and the maturity of Rails\u2014outweighed the disadvantages of a more complex execution model and smaller (but by no means small) developer community. ",(0,a.jsx)(t.a,{href:"http://laravel.com/",children:"Laravel"}),", the current leading PHP framework, for all its notable strengths, lacks the completeness and maturity of Rails and Active Record. Our choice to go with edge rails, rather than stable Rails 4.x, was driven by the fact that our server-side component is ",(0,a.jsx)(t.a,{href:"http://edgeguides.rubyonrails.org/api_app.html",children:"only serving an API"}),", and Rails 5 will eventually ship with an api-only flag. This means that many aspects of Rails\u2014the view layer, sprockets, etc\u2014have been removed, making for a more lightweight framework overall. Another strong reason for choosing Rails was the presence of a strong HTML/XML parsing library in ",(0,a.jsx)(t.a,{href:"http://nokogiri.org",children:"Nokogiri"}),". Manifold deals heavily (but not exclusively) in EPUBs, which are HTML documents. To pull those documents apart and recreate them in the browser, we need a powerful parsing tool, which we've found in ",(0,a.jsx)(t.a,{href:"http://www.nokogiri.org/",children:"Nokogiri"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["The server side application exposes a REST style API to be consumed by the client. This API conforms to the style and conventions laid out by Steve Klabnik, Yehuda Katz, Dan Gebhardt, Tyler Kellen, and Ethan Resnick in the ",(0,a.jsx)(t.a,{href:"http://jsonapi.org/",children:"JSON API Specification"}),". While it's important that developers expose all the things with APIs, it's challenging when each API follows its own idiosyncratic conventions. One of our goals on this project is to make Manifold as easy as possible to integrate into a presses existing infrastructure and environment, and following an established API specification helps us with that goal. Because the Manifold client application consumed Manifold's public API, integrators can be sure that the API is well tested and reliable."]}),"\n",(0,a.jsxs)(t.p,{children:["Authentication against the API will be handled using ",(0,a.jsx)(t.a,{href:"https://tools.ietf.org/html/rfc7519",children:"JSON Web Tokens"})," (JWT). It will also be possible for a user to generate an API token by logging in through an ",(0,a.jsx)(t.a,{href:"http://oauth.net/",children:"OAuth"})," provider such as Twitter or Facebook."]}),"\n",(0,a.jsx)(t.h2,{id:"client-side-architecture",children:"Client-side architecture"}),"\n",(0,a.jsxs)(t.p,{children:["If we made a safe, conservative choice in Rails on the server-side, we've taken more of a leap on the client-side. The Manifold client is a ",(0,a.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Single-page_application",children:"single page application"})," (SPA) that is built on ",(0,a.jsx)(t.a,{href:"https://facebook.github.io/react/",children:"React"})," and ",(0,a.jsx)(t.a,{href:"http://redux.js.org/",children:"Redux"}),". Both are relatively new Javascript libraries (or frameworks, depending on how you look at things) that are rapidly gaining mindshare and popularity among front-end developers. For those who are unfamiliar, React is a Javascript library that simplifies the process of creating reusable components. Unlike other popular libraries such as ",(0,a.jsx)(t.a,{href:"https://angularjs.org/",children:"Angular"})," or ",(0,a.jsx)(t.a,{href:"http://knockoutjs.com/",children:"Knockout"}),", React does not attempt to solve the problem of two-way data binding. Instead, it is meant to be used with a specific architecture called ",(0,a.jsx)(t.a,{href:"https://facebook.github.io/flux/",children:"Flux"}),", which is structured around one-way data flow and immutability. Both React and Redux have a relatively small surface area. Redux APIs are small, and the library as a whole is under 15k."]}),"\n",(0,a.jsx)(t.p,{children:"At Cast Iron, we've worked with many Javascript frameworks, in particular Angular and Backbone. Over time, client-side development has become quite complex, and it's our feeling that while Angular can work well on some projects, it doesn't do enough to reduce that complexity. By restricting the way in which data can flow through the application, and abstracting away the asynchronicity that can make client-side development challenging, we've found Redux and React to be a powerful combination that allows us to iterate quickly without sacrificing quality or maintainability."}),"\n",(0,a.jsxs)(t.p,{children:["There are some challenges that come with developing a single page javascript application. For our purposes, the biggest challenge is to ensure that there is content loaded on the page before the javascript executes. We feel strongly that Manifold needs to be accessible to users with disability, to search engine crawlers, to screen readers, etc, and that we can't count on a javascript environment. For this reason, the Manifold client will be served by a small Node/Express application running on the server. Most of the javascript that executes in the browser is built to be ",(0,a.jsx)(t.a,{href:"http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/",children:"isomorphic"})," (now also known as ",(0,a.jsx)(t.a,{href:"https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.hna9d3dg8",children:"universal"}),"), which means that care has been taken to ensure that it can be executed in a server-side context (node) and in a client-side context (the browser). The practical outcome of this approach is that the server-side component will be able to fully render the HTML before sending the page to the client, which solves the many accessibility and SEO problems."]}),"\n",(0,a.jsx)(t.p,{children:"The advantages to the SPA approach are, well, manifold. The application will feel very fast, and we'll be vastly reducing the amount of data that's sent over the network. Complex UI elements, like the annotation pieces, will be have a much more stable, testable framework backing them. There will be more room for reusable components, and the various state-changes that can occur in the client-side application will be well tested."}),"\n",(0,a.jsx)(t.p,{children:"While we're diving in head-first on React + Redux, we are not, for now, following the current trend of doing only inline-CSS. For the time being, we'll be using the SASS preprocessor for all styles."}),"\n",(0,a.jsxs)(t.p,{children:["At the language level, we're relying heavily on ES6 and upcoming ES7 features. We're using ",(0,a.jsx)(t.a,{href:"https://babeljs.io/",children:"Babel"})," to transpile ES6+ code down to ES5  so that it will run in IE9+, Firefox, and Safari. By using edge Javascript language features, our hope is that to some degree we will future proof Manifold code. For now, we're limiting ourselves to ",(0,a.jsx)(t.a,{href:"https://github.com/tc39/ecma262/blob/master/README.md",children:"ES6+ features that are at stage 1 or greater"}),", and acknowledge that there is some risk even with stage 1."]}),"\n",(0,a.jsxs)(t.p,{children:["We rely heavily on ",(0,a.jsx)(t.a,{href:"https://www.npmjs.com/",children:"NPM"})," for package management, and ",(0,a.jsx)(t.a,{href:"https://webpack.github.io/",children:"Webpack"})," for transpiling assets during development, and for building assets for production. At Cast Iron, we've used Grunt and Gulp on other projects, but it looks to us like the React community is gravitating toward Webpack, and for good reasons. On Manifold, it's being used for automatically linting our code, for generating icon fonts from SVG icons, for transpiling ES6+ to ES5, and Sass to CSS."]}),"\n",(0,a.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,a.jsxs)(t.p,{children:["Tests are important. They build confidence and help us to refactor without regressions. While we don't always follow test-driven-development practices, we do feel that it's important to have a robust test suite in place. On the API side, we're using ",(0,a.jsx)(t.a,{href:"http://rspec.info/",children:"rspec"})," for tests. On the client-side we will be using ",(0,a.jsx)(t.a,{href:"https://mochajs.org/",children:"Mocha"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"server-infrastructure-and-continuous-integration",children:"Server infrastructure and continuous integration"}),"\n",(0,a.jsxs)(t.p,{children:["DevOps and infrastructure automation are essential to our workflow at Cast Iron. We use ",(0,a.jsx)(t.a,{href:"https://github.com/boxen/our-boxen/#our-boxen",children:"Boxen"})," to setup development instances of projects, and we use ",(0,a.jsx)(t.a,{href:"https://puppetlabs.com/",children:"Puppet"})," to deploy applications to staging and production environments. Our manifests for deploying Manifold are still in progress, but they're close. Soon, I hope to have a staging environment that's updated regularly via ",(0,a.jsx)(t.a,{href:"https://jenkins-ci.org/",children:"Jenkins"}),", our continuous integration server. Soon, we'll also have Travis build notifications in place on the Github repository."]}),"\n",(0,a.jsx)(t.p,{children:"To run Manifold, you'll need to have the following setup on a server:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Nginx for serving the Ruby app and the Node app"}),"\n",(0,a.jsx)(t.li,{children:"Puma for serving Manifold API (although you could use Unicorn or another app server)"}),"\n",(0,a.jsx)(t.li,{children:"Ruby 2.2.x"}),"\n",(0,a.jsx)(t.li,{children:"Postgres for the API database"}),"\n",(0,a.jsx)(t.li,{children:"A recent version of Node"}),"\n",(0,a.jsx)(t.li,{children:"Eventually, I expect you'll need Elastic Search for the search component"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"We'll be providing instructions on how to set this up, as well as sample config files. Eventually, I hope to provide apt-get packages for Ubuntu as well. Once things are a bit more stable, we'll regularly release docker containers that you can use to take Manifold for a spin."}),"\n",(0,a.jsx)(t.h2,{id:"in-closing",children:"In Closing"}),"\n",(0,a.jsx)(t.p,{children:"Hopefully this gives you a better sense of what we're using to build Manifold, and why. I'd love to have a conversation about our choices, so please don't hesitate to leave feedback in the comments. In the coming weeks, I'm going to try to share some early artifacts from the UX and visual design process, to give you a better sense of what Manifold will look like and what it will be capable of."})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var a=n(96540);const o={},i=a.createContext(o);function r(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);